<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Global Telework – Manual Payment</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#f4f4f4;margin:0;padding:0}
header{background:#2e7d32;color:#fff;padding:15px;text-align:center}
main{display:flex;flex-wrap:wrap;gap:20px;padding:20px;justify-content:center}
section{background:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,.15);flex:1;min-width:320px;max-width:700px}
label{display:block;margin-top:10px;font-weight:bold}
input,select,button{width:100%;padding:8px;margin-top:5px;border-radius:5px;border:1px solid #ccc}
button{background:#2e7d32;color:#fff;border:none;cursor:pointer;margin-top:10px}
button:hover{background:#256628}
.wallet{background:#eee;padding:8px;font-weight:bold;word-break:break-all}
.status{font-weight:bold}
.pending{color:orange}
.verified{color:green}
.rejected{color:red}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
.hidden{display:none}
@media(max-width:600px){main{flex-direction:column;align-items:center}}
</style>
</head>
<body>

<header>
<h1>Global Telework – Manual USDT Payment</h1>
<p>TRC20 Wallet: TUWa99kY7KUYJbh1GWdJWa6n597yDkM8Aq</p>
</header>

<main>

<!-- USER FORM -->
<section>
<h2>User Registration</h2>
<form id="userForm">
<label>Role</label>
<select id="role" required>
<option value="">Select</option>
<option value="Employer">Employer (1 USDT)</option>
<option value="Worker">Worker (2 USDT)</option>
</select>

<label>Project (Employers only)</label>
<select id="project">
<option value="">N/A</option>
<option>Website</option>
<option>Mobile App</option>
<option>Design</option>
<option>Marketing</option>
<option>SEO</option>
</select>

<label>Username</label>
<input id="username" required>

<label>TXID (Transaction Hash)</label>
<input id="txid" placeholder="Paste TXID after payment" required>

<p>Send USDT (TRC20) to:</p>
<div class="wallet">TUWa99kY7KUYJbh1GWdJWa6n597yDkM8Aq</div>

<button type="submit">I Paid</button>
</form>
</section>

<!-- ADMIN PANEL -->
<section class="hidden" id="adminSection">
<h2>Admin Panel</h2>
<table>
<thead>
<tr>
<th>User</th><th>Role</th><th>Project</th><th>Amount</th><th>TXID</th><th>Status</th><th>Action</th>
</tr>
</thead>
<tbody id="adminTable"></tbody>
</table>
<button onclick="downloadCSV()">Download CSV</button>
</section>

</main>

<script>
// Password for admin panel
const adminPassword = "admin123"; // می‌توانید تغییر دهید
const adminSection = document.getElementById("adminSection");

window.addEventListener("load", ()=>{
  let pass = prompt("Enter admin password (or cancel to skip)");
  if(pass===adminPassword) adminSection.classList.remove("hidden");
});

// LocalStorage for payments
let payments = JSON.parse(localStorage.getItem("payments") || "[]");
function save(){ localStorage.setItem("payments", JSON.stringify(payments)); render(); }
function render(){
  const table = document.getElementById("adminTable");
  table.innerHTML="";
  payments.forEach((p,i)=>{
    table.innerHTML += `<tr>
      <td>${p.username}</td>
      <td>${p.role}</td>
      <td>${p.project}</td>
      <td>${p.amount}</td>
      <td>${p.txid}</td>
      <td class="status ${p.status}">${p.status}</td>
      <td>
        <button onclick="verify(${i})">✔</button>
        <button onclick="reject(${i})">✖</button>
      </td>
    </tr>`;
  });
}

// User form
document.getElementById("userForm").onsubmit=e=>{
  e.preventDefault();
  if(!txid.value.trim() || txid.value.trim().length<20){
    alert("Enter valid TXID"); return;
  }
  payments.push({
    username:username.value,
    role:role.value,
    project:project.value||"N/A",
    amount:role.value==="Employer"?1:2,
    txid:txid.value.trim(),
    status:"pending"
  });
  save();
  e.target.reset();
  alert("Payment submitted. Await admin verification.");
};

function verify(i){ payments[i].status="verified"; save(); }
function reject(i){ payments[i].status="rejected"; save(); }

function downloadCSV(){
  if(payments.length===0){alert("No payments");return;}
  let csv="Username,Role,Project,Amount,TXID,Status\n";
  payments.forEach(p=>{csv+=`${p.username},${p.role},${p.project},${p.amount},${p.txid},${p.status}\n`;});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(new Blob([csv],{type:"text/csv"}));
  a.download="payments.csv"; a.click();
}

// Role change for payment amount
role.onchange=()=>{ project.required=role.value==="Employer"; }
</script>
</body>
</html>
